{"ast":null,"code":"var _jsxFileName = \"/Users/ahmad/clock-in-out 2/client/src/ClockInOut.js\",\n  _s = $RefreshSig$();\n// src/ClockInOut.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ClockInOut = () => {\n  _s();\n  const {\n    user\n  } = useSelector(state => state.auth); // Get logged-in user from Redux\n  const [isClockedIn, setIsClockedIn] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Function to fetch the current user's clock status\n  const fetchUserStatus = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('token');\n      console.log(\"[DEBUG] fetchUserStatus - Retrieved token:\", token);\n      if (!token) {\n        throw new Error('No token found');\n      }\n      const response = await axios.get('http://localhost:3001/api/users/current-user', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(\"[DEBUG] fetchUserStatus - Response data:\", response.data);\n\n      // Make sure the response has the expected structure\n      if (response.data && typeof response.data.clockedIn !== 'undefined') {\n        setIsClockedIn(response.data.clockedIn);\n      } else {\n        console.warn(\"[DEBUG] fetchUserStatus - Unexpected response structure:\", response.data);\n      }\n      setError(null);\n    } catch (err) {\n      console.error(\"[DEBUG] fetchUserStatus - Error:\", err.response || err);\n      if (err.response && err.response.data) {\n        console.error(\"[DEBUG] fetchUserStatus - Server error data:\", err.response.data);\n      }\n      setError('Failed to fetch user status. Please try again.');\n    }\n  }, []);\n  useEffect(() => {\n    fetchUserStatus();\n  }, [fetchUserStatus]);\n\n  // Handler for clock in/out button click\n  const handleClockInOut = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      console.log(\"[DEBUG] handleClockInOut - Retrieved token:\", token);\n      if (!token) {\n        throw new Error('No token found');\n      }\n      // Determine which endpoint to call based on current status\n      const endpoint = isClockedIn ? 'http://localhost:3001/api/users/current-user/clock-out' : 'http://localhost:3001/api/users/current-user/clock-in';\n      console.log(`[DEBUG] handleClockInOut - Sending PUT request to: ${endpoint}`);\n      const response = await axios.put(endpoint, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(\"[DEBUG] handleClockInOut - Response data:\", response.data);\n      await fetchUserStatus();\n      setError(null);\n    } catch (err) {\n      console.error(\"[DEBUG] handleClockInOut - Error:\", err.response || err);\n      if (err.response && err.response.data) {\n        console.error(\"[DEBUG] handleClockInOut - Server error data:\", err.response.data);\n      }\n      setError('Failed to clock in/out. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: isClockedIn ? 'Clocked In' : 'Clocked Out'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleClockInOut,\n      children: isClockedIn ? 'Clock Out' : 'Clock In'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(ClockInOut, \"waCAF5V8AivzHglMn89nkgxDADY=\", false, function () {\n  return [useSelector];\n});\n_c = ClockInOut;\nexport default ClockInOut;\nvar _c;\n$RefreshReg$(_c, \"ClockInOut\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useSelector","jsxDEV","_jsxDEV","ClockInOut","_s","user","state","auth","isClockedIn","setIsClockedIn","error","setError","fetchUserStatus","token","localStorage","getItem","console","log","Error","response","get","headers","Authorization","data","clockedIn","warn","err","handleClockInOut","endpoint","put","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","color","_c","$RefreshReg$"],"sources":["/Users/ahmad/clock-in-out 2/client/src/ClockInOut.js"],"sourcesContent":["// src/ClockInOut.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\n\nconst ClockInOut = () => {\n  const { user } = useSelector((state) => state.auth); // Get logged-in user from Redux\n  const [isClockedIn, setIsClockedIn] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Function to fetch the current user's clock status\n  const fetchUserStatus = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('token');\n      console.log(\"[DEBUG] fetchUserStatus - Retrieved token:\", token);\n      if (!token) {\n        throw new Error('No token found');\n      }\n\n      const response = await axios.get('http://localhost:3001/api/users/current-user', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      console.log(\"[DEBUG] fetchUserStatus - Response data:\", response.data);\n\n      // Make sure the response has the expected structure\n      if (response.data && typeof response.data.clockedIn !== 'undefined') {\n        setIsClockedIn(response.data.clockedIn);\n      } else {\n        console.warn(\"[DEBUG] fetchUserStatus - Unexpected response structure:\", response.data);\n      }\n      \n      setError(null);\n    } catch (err) {\n      console.error(\"[DEBUG] fetchUserStatus - Error:\", err.response || err);\n      if (err.response && err.response.data) {\n        console.error(\"[DEBUG] fetchUserStatus - Server error data:\", err.response.data);\n      }\n      setError('Failed to fetch user status. Please try again.');\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchUserStatus();\n  }, [fetchUserStatus]);\n\n  // Handler for clock in/out button click\n  const handleClockInOut = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      console.log(\"[DEBUG] handleClockInOut - Retrieved token:\", token);\n      if (!token) {\n        throw new Error('No token found');\n      }\n      // Determine which endpoint to call based on current status\n      const endpoint = isClockedIn\n        ? 'http://localhost:3001/api/users/current-user/clock-out'\n        : 'http://localhost:3001/api/users/current-user/clock-in';\n      console.log(`[DEBUG] handleClockInOut - Sending PUT request to: ${endpoint}`);\n\n      const response = await axios.put(endpoint, {}, { headers: { Authorization: `Bearer ${token}` } });\n      console.log(\"[DEBUG] handleClockInOut - Response data:\", response.data);\n      await fetchUserStatus();\n      setError(null);\n    } catch (err) {\n      console.error(\"[DEBUG] handleClockInOut - Error:\", err.response || err);\n      if (err.response && err.response.data) {\n        console.error(\"[DEBUG] handleClockInOut - Server error data:\", err.response.data);\n      }\n      setError('Failed to clock in/out. Please try again.');\n    }\n  };\n\n  return (\n    <div>\n      <h1>{isClockedIn ? 'Clocked In' : 'Clocked Out'}</h1>\n      <button onClick={handleClockInOut}>\n        {isClockedIn ? 'Clock Out' : 'Clock In'}\n      </button>\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n    </div>\n  );\n};\n\nexport default ClockInOut;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}